{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.connector-factory.dev/openweather/v3/raw/onecall-response.schema.json",
  "title": "OpenWeather One Call API Response",
  "description": "Raw response from OpenWeather One Call API v3.0 including current weather, forecasts, and alerts",
  "type": "object",
  "properties": {
    "lat": {
      "type": "number",
      "minimum": -90,
      "maximum": 90,
      "description": "Latitude of the location"
    },
    "lon": {
      "type": "number", 
      "minimum": -180,
      "maximum": 180,
      "description": "Longitude of the location"
    },
    "timezone": {
      "type": "string",
      "description": "Timezone name for the requested location"
    },
    "timezone_offset": {
      "type": "integer",
      "description": "Shift in seconds from UTC"
    },
    "current": {
      "$ref": "#/$defs/CurrentWeather",
      "description": "Current weather data"
    },
    "minutely": {
      "type": "array",
      "maxItems": 61,
      "items": {
        "$ref": "#/$defs/MinutelyWeather"
      },
      "description": "Minute forecast for 1 hour"
    },
    "hourly": {
      "type": "array",
      "maxItems": 48,
      "items": {
        "$ref": "#/$defs/HourlyWeather"
      },
      "description": "Hourly forecast for 48 hours"
    },
    "daily": {
      "type": "array",
      "maxItems": 8,
      "items": {
        "$ref": "#/$defs/DailyWeather"
      },
      "description": "Daily forecast for 8 days"
    },
    "alerts": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/WeatherAlert"
      },
      "description": "Government weather alerts"
    }
  },
  "required": ["lat", "lon", "timezone"],
  "$defs": {
    "CurrentWeather": {
      "type": "object",
      "properties": {
        "dt": {
          "type": "integer",
          "description": "Current time, Unix timestamp, UTC"
        },
        "sunrise": {
          "type": "integer",
          "description": "Sunrise time, Unix timestamp, UTC"
        },
        "sunset": {
          "type": "integer", 
          "description": "Sunset time, Unix timestamp, UTC"
        },
        "temp": {
          "type": "number",
          "description": "Temperature"
        },
        "feels_like": {
          "type": "number",
          "description": "Temperature accounting for human perception"
        },
        "pressure": {
          "type": "number",
          "description": "Atmospheric pressure on sea level, hPa"
        },
        "humidity": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Humidity percentage"
        },
        "dew_point": {
          "type": "number",
          "description": "Atmospheric temperature below which water droplets begin to condense"
        },
        "uvi": {
          "type": "number",
          "description": "UV index"
        },
        "clouds": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Cloudiness percentage"
        },
        "visibility": {
          "type": "number",
          "description": "Average visibility, meters"
        },
        "wind_speed": {
          "type": "number",
          "description": "Wind speed"
        },
        "wind_deg": {
          "type": "number",
          "minimum": 0,
          "maximum": 360,
          "description": "Wind direction, degrees"
        },
        "wind_gust": {
          "type": "number",
          "description": "Wind gust speed"
        },
        "weather": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/WeatherCondition"
          },
          "description": "Weather condition codes and descriptions"
        }
      },
      "required": ["dt", "temp", "humidity", "weather"]
    },
    "MinutelyWeather": {
      "type": "object",
      "properties": {
        "dt": {
          "type": "integer",
          "description": "Time, Unix timestamp, UTC"
        },
        "precipitation": {
          "type": "number",
          "description": "Precipitation volume, mm"
        }
      },
      "required": ["dt", "precipitation"]
    },
    "HourlyWeather": {
      "type": "object",
      "properties": {
        "dt": {
          "type": "integer",
          "description": "Time, Unix timestamp, UTC"
        },
        "temp": {
          "type": "number",
          "description": "Temperature"
        },
        "feels_like": {
          "type": "number",
          "description": "Temperature accounting for human perception"
        },
        "pressure": {
          "type": "number",
          "description": "Atmospheric pressure, hPa"
        },
        "humidity": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Humidity percentage"
        },
        "dew_point": {
          "type": "number",
          "description": "Dew point temperature"
        },
        "uvi": {
          "type": "number",
          "description": "UV index"
        },
        "clouds": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Cloudiness percentage"
        },
        "visibility": {
          "type": "number",
          "description": "Average visibility, meters"
        },
        "wind_speed": {
          "type": "number",
          "description": "Wind speed"
        },
        "wind_deg": {
          "type": "number",
          "minimum": 0,
          "maximum": 360,
          "description": "Wind direction, degrees"
        },
        "wind_gust": {
          "type": "number",
          "description": "Wind gust speed"
        },
        "weather": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/WeatherCondition"
          }
        },
        "pop": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Probability of precipitation"
        }
      },
      "required": ["dt", "temp", "humidity", "weather"]
    },
    "DailyWeather": {
      "type": "object",
      "properties": {
        "dt": {
          "type": "integer",
          "description": "Time, Unix timestamp, UTC"
        },
        "sunrise": {
          "type": "integer",
          "description": "Sunrise time, Unix timestamp, UTC"
        },
        "sunset": {
          "type": "integer",
          "description": "Sunset time, Unix timestamp, UTC"
        },
        "moonrise": {
          "type": "integer",
          "description": "Moonrise time, Unix timestamp, UTC"
        },
        "moonset": {
          "type": "integer",
          "description": "Moonset time, Unix timestamp, UTC"
        },
        "moon_phase": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Moon phase (0-1)"
        },
        "summary": {
          "type": "string",
          "description": "Human-readable description of the weather conditions"
        },
        "temp": {
          "type": "object",
          "properties": {
            "day": {"type": "number", "description": "Day temperature"},
            "min": {"type": "number", "description": "Minimum daily temperature"},
            "max": {"type": "number", "description": "Maximum daily temperature"},
            "night": {"type": "number", "description": "Night temperature"},
            "eve": {"type": "number", "description": "Evening temperature"},
            "morn": {"type": "number", "description": "Morning temperature"}
          },
          "required": ["day", "min", "max"]
        },
        "feels_like": {
          "type": "object",
          "properties": {
            "day": {"type": "number"},
            "night": {"type": "number"},
            "eve": {"type": "number"},
            "morn": {"type": "number"}
          }
        },
        "pressure": {
          "type": "number",
          "description": "Atmospheric pressure, hPa"
        },
        "humidity": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Humidity percentage"
        },
        "dew_point": {
          "type": "number",
          "description": "Dew point temperature"
        },
        "wind_speed": {
          "type": "number",
          "description": "Wind speed"
        },
        "wind_deg": {
          "type": "number",
          "minimum": 0,
          "maximum": 360,
          "description": "Wind direction, degrees"
        },
        "wind_gust": {
          "type": "number",
          "description": "Wind gust speed"
        },
        "weather": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/WeatherCondition"
          }
        },
        "clouds": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Cloudiness percentage"
        },
        "pop": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Probability of precipitation"
        },
        "rain": {
          "type": "number",
          "description": "Precipitation volume, mm"
        },
        "snow": {
          "type": "number",
          "description": "Snow volume, mm"
        },
        "uvi": {
          "type": "number",
          "description": "Maximum UV index for the day"
        }
      },
      "required": ["dt", "temp", "humidity", "weather"]
    },
    "WeatherCondition": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "description": "Weather condition id"
        },
        "main": {
          "type": "string",
          "description": "Group of weather parameters (Rain, Snow, Extreme etc.)"
        },
        "description": {
          "type": "string",
          "description": "Weather condition within the group"
        },
        "icon": {
          "type": "string",
          "pattern": "^[0-9]{2}[dn]$",
          "description": "Weather icon id"
        }
      },
      "required": ["id", "main", "description", "icon"]
    },
    "WeatherAlert": {
      "type": "object",
      "properties": {
        "sender_name": {
          "type": "string",
          "description": "Name of the alert source"
        },
        "event": {
          "type": "string",
          "description": "Alert event name"
        },
        "start": {
          "type": "integer",
          "description": "Date and time of the start of the alert, Unix timestamp, UTC"
        },
        "end": {
          "type": "integer",
          "description": "Date and time of the end of the alert, Unix timestamp, UTC"
        },
        "description": {
          "type": "string",
          "description": "Description of the alert"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Type of severe weather"
        }
      },
      "required": ["sender_name", "event", "start", "end", "description"]
    }
  }
}